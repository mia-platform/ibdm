apiVersion: console.mia-platform.eu/v1alpha1
resource: projects
type: project
syncable: true
mappings:
  identifier: |-
    {{ printf "%s" .project._id }}
  spec:
    uniqueId: "{{ .project._id }}"
    projectId: "{{ .project.projectId }}"
    tenantId: "{{ .project.tenantId }}"
    name: "{{ .project.name }}"
    repository: "{{ .project.repository | toJSON }}"
    repositoryUrl: "{{ get \"repositoryUrl\" .project \"\" | quote }}"
    availableNamespaces: "{{ get \"availableNamespaces\" .project (list) | toJSON }}"
    configurationGitPath: "{{ .project.configurationGitPath }}"
    defaultBranch: "{{ get \"defaultBranch\" .project \"\" | quote }}"
    description: "{{ get \"description\" .project \"\" | quote }}"
    environments: "{{ .project.environments | toJSON }}"
    imagePullSecretNames: "{{ get \"imagePullSecretNames\" .project (list) | toJSON }}"
    updatedAt: "{{ get \"updatedAt\" .project (now) }}"
