apiVersion: console.mia-platform.eu/v1alpha1
itemFamily: revisions
type: revision
syncable: true
mappings:
  identifier: |-
    {{ printf "%s-%s" .project._id .revision.name }}
  metadata:
    title: "{{ printf \"%s\" .revision.name }}"
    labels: |-
      {{ $labels := object "mia-platform.eu/part-of-project" .project._id -}}
      {{- $labels | toJSON }}
  spec: {}
  extra:
    - apiVersion: mia-platform.eu/v1alpha1
      itemFamily: relationships
      deletePolicy: "cascade"
      identifier: |-
        {{ printf "relationship-%s-%s-%s-dependency" .project._id .project._id .revision.name }}
      sourceRef:
        apiVersion: "console.mia-platform.eu/v1alpha1"
        family: "projects"
        name: "{{ .project._id }}"
      typeRef:
        apiVersion: "mia-platform.eu/v1alpha1"
        family: "relationship-types"
        name: "dependency.mia-platform.eu"
