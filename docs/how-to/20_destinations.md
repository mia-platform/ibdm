# `ibdm` Destinations

`ibdm` support only two kind of destinations for the data read from the given source.  
The main one, enabled by default, is to the Mia-Platform Catalog the other one is the configured
`stdout`.

## Mia-Platform Catalog

To enable this destination no flags are needed but only a series of environment variables:

- `MIA_CATALOG_ENDPOINT`: the destination endpoint for the data, available during the integration
	setup
- `MIA_CATALOG_CLIENT_ID`: the client id for validating the requests to the Mia-Platform Catalog,
	availbale during the integration setup
- `MIA_CATALOG_CLIENT_SECRET`: the client id for validating the requests to the Mia-Platform Catalog,
	availbale during the integration setup
- `MIA_CATALOG_AUTH_ENDPOINT`: a custom endpoint for authentication, if you don’t set the variable
	the endpoint used will be the host present in MIA_CATALOG_ENDPOINT with the `/oauth/token`
	endpoint

If you don’t set any variables the destination will try to connect to
`http://localhost:8080/api/publish/` without any authentication.

## Local Output

`ibdm` can also be used to validate custom mappings or custom source implementations with a
dedicated destination that can be enabled via the `--local-output` flag. An example can be:

```sh
ibdm run azure --mapping-file <path to custom mapping> --local-output
```

This output don’t require any configuration but it will print on `stdout` a summary of the action
(upsert or delete), extracted by the event generated from the configured source, and a set of
values generated by the configured mapping.  
An example of the output generated by an upsert and a delete can be found below:

```txt
Send data:
	APIVersion: <API Version of the mapping>
	Resource: <Resources of the mapping>
	Resource Name: <Result of the Identifier map>
	Timestamp: <Timestamp of the event>
	Spec: {
		<Result as key and values of the Spec map>
	}

Delete data:
	APIVersion: <API Version of the mapping>
	Resource: <Resources of the mapping>
	Resource <Result of the Identifier map>
	Timestamp: <Timestamp of the event>

```
